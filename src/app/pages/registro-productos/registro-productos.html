<div class="background">
  <div class="light-wrapper ">
    <div class="card-form" >

      <h2 class="text-center mb-4 fw-bold " style= "color: #a04938">Productos</h2>

      <form #formProducto="ngForm" (ngSubmit)="onSubmit(formProducto)" class="row g-4" novalidate>

        <div class="form-alert" *ngIf="formProducto.submitted && formProducto.invalid">
          Por favor, completa correctamente los campos requeridos.
        </div>

        <!-- NOMBRE -->
        <div class="col-12 position-relative">
          <label class="form-label fw-semibold">Nombre</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-box-seam"></i></span>
            <input type="text" class="form-control clean-input"
              name="nombre" [(ngModel)]="model.nombre"
              placeholder="Nombre del producto"
              required minlength="2" #nombre="ngModel">
          </div>
          <small class="error-msg" *ngIf="nombre.invalid && (nombre.dirty || nombre.touched)">
            <span *ngIf="nombre.errors?.['required']">El nombre es obligatorio</span>
            <span *ngIf="nombre.errors?.['minlength']">Debe tener mínimo 2 caracteres</span>
          </small>
        </div>

        <!-- DESCRIPCIÓN -->
        <div class="col-12 position-relative">
          <label class="form-label fw-semibold">Descripción</label>
          <div class="input-group">
            <span class="input-group-text align-items-start pt-2"><i class="bi bi-text-left"></i></span>
            <textarea class="form-control clean-input"
              name="descripcion" [(ngModel)]="model.descripcion"
              placeholder="Descripción detallada del producto" rows="3"
              required minlength="5" #descripcion="ngModel"></textarea>
          </div>
          <small class="error-msg" *ngIf="descripcion.invalid && (descripcion.dirty || descripcion.touched)">
            <span *ngIf="descripcion.errors?.['required']">La descripción es obligatoria</span>
            <span *ngIf="descripcion.errors?.['minlength']">Debe tener al menos 5 caracteres</span>
          </small>
        </div>

        <!-- PRECIO -->
        <div class="col-12 col-sm-6 position-relative">
          <label class="form-label fw-semibold">Precio</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-currency-dollar"></i></span>
            <input type="number" step="0.01" class="form-control clean-input"
              name="precio" [(ngModel)]="model.precio"
              placeholder="0.00"
              required min="0.1" #precio="ngModel">
          </div>
          <small class="error-msg" *ngIf="precio.invalid && (precio.dirty || precio.touched)">
            <span *ngIf="precio.errors?.['required']">El precio es obligatorio</span>
            <span *ngIf="precio.errors?.['min']">Debe ser mayor a 0</span>
          </small>
        </div>

        <!-- STOCK -->
        <div class="col-12 col-sm-6  position-relative">
          <label class="form-label fw-semibold">Stock</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-bag-check"></i></span>
            <input type="number" class="form-control clean-input"
              name="stock" [(ngModel)]="model.stock"
              placeholder="Cantidad disponible"
              required min="1" #stock="ngModel">
          </div>
          <small class="error-msg" *ngIf="stock.invalid && (stock.dirty || stock.touched)">
            <span *ngIf="stock.errors?.['required']">Ingresa el stock disponible</span>
            <span *ngIf="stock.errors?.['min']">Debe ser mínimo 1</span>
          </small>
        </div>

        <!-- ESTADO -->
        <div class="col-12 col-sm-6 position-relative">
          <label class="form-label fw-semibold">Estado</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-toggle-on"></i></span>
            <select class="form-select clean-input"
              name="estado" [(ngModel)]="model.estado"
              required #estado="ngModel">
              <option value="" disabled selected>Selecciona una opción</option>
              <option value="activo">Activo</option>
              <option value="inactivo">Inactivo</option>
            </select>
          </div>
          <small class="error-msg" *ngIf="estado.invalid && (estado.dirty || estado.touched)">
            Selecciona el estado del producto
          </small>
        </div>

        <!-- CATEGORÍA -->
        <div class="col-12 col-sm-6 position-relative">
          <label class="form-label fw-semibold">Categoría</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-tags"></i></span>
            <select class="form-select clean-input"
              name="categoria" [(ngModel)]="model.categoria"
              required #categoria="ngModel">
              <option value="" disabled selected>Selecciona una categoría</option>
              <option>Alimento</option>
              <option>Higiene</option>
              <option>Juguete</option>
              <option>Medicamento</option>
              <option>Accesorio</option>
            </select>
          </div>
          <small class="error-msg" *ngIf="categoria.invalid && (categoria.dirty || categoria.touched)">
            Selecciona una categoría válida
          </small>
        </div>

        <!-- MARCA -->
        <div class="col-12 col-sm-6 position-relative">
          <label class="form-label fw-semibold">Marca</label>
          <div class="input-group">
            <span class="input-group-text"><i class="bi bi-building"></i></span>
            <input type="text" class="form-control clean-input"
              name="marca" [(ngModel)]="model.marca"
              placeholder="Ej. Pedigree, Royal Canin"
              required minlength="2" #marca="ngModel">
          </div>
          <small class="error-msg" *ngIf="marca.invalid && (marca.dirty || marca.touched)">
            <span *ngIf="marca.errors?.['required']">La marca es obligatoria</span>
            <span *ngIf="marca.errors?.['minlength']">Debe tener mínimo 2 letras</span>
          </small>
        </div>

        <div class="col-12 text-center">
          <button type="submit"
            class="btn btn-primary px-5 py-2 rounded-pill mt-3"
            [disabled]="formProducto.invalid">
            Guardar Producto
          </button>
        </div>

      </form>
    </div>
  </div>
</div>
